<div cdkDropList
     [cdkDropListData]="items"
     (cdkDropListDropped)="onDrop($event)"
     class="flex flex-col gap-4"
>
  <div *ngFor="let item of items; let index = index" cdkDragHandle
       cdkDrag
       class="rounded-md p-4 shadow-md bg-white item"
  >
    <!-- Header -->
    <div class="flex items-center justify-between gap-4">
      <!-- <div cdkDragHandle class="cursor-move text-gray-500">
        <i class="fa-solid fa-bars"></i>
      </div> -->

      <div class="w-1/12 text-center font-semibold">{{ index + 1 }}ยบ</div>

      <div class="flex-1 flex items-center gap-3">
        <div class="dash-logo shrink-0">
          <img class="img-logo" [src]="item.icon" alt="logo" />
        </div>
        <span class="truncate">{{ item.name }}</span>
      </div>

      <div class="shrink-0 w-8 text-right">
        <ng-container *ngIf="showPlayer && itemClickedId === item.id; else play">
          <i class="fas fa-circle-xmark text-red-400 text-2xl cursor-pointer"
             (click)="emitPlayerClick(item, 'close')"></i>
        </ng-container>
        <ng-template #play>
          <i class="fas fa-circle-play play-btn text-2xl cursor-pointer"
             (click)="emitPlayerClick(item, 'play')"></i>
        </ng-template>
      </div>
    </div>

    <!-- Player -->
    <div *ngIf="showPlayer && itemClickedId === item.id" class="mt-2">
      <iframe
        [src]="getSpotifyEmbedUrl(item.albumId)"
        width="100%"
        height="200"
        frameborder="0"
        style="border-radius:12px"
        allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture"
        loading="lazy"
      ></iframe>
    </div>
  </div>
</div>
